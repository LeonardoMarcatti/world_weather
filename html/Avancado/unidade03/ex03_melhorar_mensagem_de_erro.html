<!doctype html>
<html lang="pt-br">
    <head>
		<meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="icon" href="https://phproberto.gallerycdn.vsassets.io/extensions/phproberto/vscode-php-getters-setters/1.2.3/1525759974843/Microsoft.VisualStudio.Services.Icons.Default" type="image/gif" sizes="16x16">
        <title>Curso HTML5 Avançado</title>    
	</head>
    <body>
		<form action="">
			<div class="form-group col-5">
				<label for="status"><small>Sua posicao geográfica aparecerá abaixo</small></label>
				<input type="text" name="" id="status" class="form-control" disabled="">
			</div>
			<div class="form-group col-5">
				<input type="button" value="Pegar Geolocalização" class="btn btn-danger" id="pegar">
			</div>
		</form>

		<p></p>
		<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
		<script src="https://kit.fontawesome.com/ec29234e56.js" crossorigin="anonymous"></script>
		<script type="text/javascript">        
			let el = document.getElementById('pegar');
			el.addEventListener("click", () => {
				let nav = null;
				document.getElementById('status').value = 'Aguarde';
				setTimeout(() => {
					if (nav == null) {
					nav = window.navigator;
				};

				let geoloc = nav.geolocation;
				if (geoloc != null ) {
					geoloc.getCurrentPosition(retonarPosicao, retornarFalha);
				};

				function retonarPosicao(posicao) {
					let lat, long;
					lat = posicao.coords.latitude;
					long = posicao.coords.longitude;
					document.getElementById('status').value = `${lat}, ${long}`
				};

				function retornarFalha(error) {
					let message;
					switch (error.code) {
						case 1:
							message = 'Negado pelo usuário!';
							console.log(error);							
							break;

						case 2:
							message = 'Indisponível';
							console.log(error);
							break;

						case 1:
							message = 'Timeout';
							console.log(error);							
							break;

						default:
						break;
					}
					alert(message);
				};
				}, 2000);
			});
		</script>
    </body>
</html>
